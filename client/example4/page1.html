<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example 4</title>
<script type="text/javascript">

window.onbeforeunload = function(e) {
    let dirty = document.getElementById("chkDirty").checked;

    console.log(dirty);

    //e.preventDefault();
    //return "Are you sure you want to navigate away?";

    return null;
};

window.onpopstate = function(event) {
  console.log("location: " + document.location + ", state: " + JSON.stringify(event.state));
};

window.onload = function() {
    document.getElementById("btnForward").addEventListener("click", function(){
        history.go(1);
    });

    document.getElementById("btnBackward").addEventListener("click", function(){
        history.go(-1);
    });

    document.getElementById("btnHistoryLength").addEventListener("click", function(){
        alert(history.length);
    });

    document.getElementById("btnReplace").addEventListener("click", function(){
        location.replace("page2.html");
    });

    document.getElementById("btnAssign").addEventListener("click", function(){
        location.assign("page2");
    });

    document.getElementById("btnPushState").addEventListener("click", function(){
        let state = {
            A: 'a'
        };

        history.pushState(state, '', "#A");
    });

    document.getElementById("btnReplaceState").addEventListener("click", function(){
        let state = {
            A: 'b'
        };

        history.replaceState(state, '', "#B");
    });

};

</script>
</head>
<body>
<div>Example 4 - Page 1</div>
<div>
    <input type="checkbox" id="chkDirty">Page is dirty<br>
</div>
<div>
<div><a href="/">Back ...</a></div>

<!-- Submit and immediate redirect -->
<form action="/handle-post?page=2" method="POST">
    <button type="submit">Submit Form</button>
</form>

<div>
    <button type="button" id="btnReplace">Replace</button>
    <button type="button" id="btnAssign">Assign</button>
</div>

<div>
    <button type="button" id="btnPushState">Push State</button>
    <button type="button" id="btnReplaceState">Replace State</button>
</div>

<div>
    <button type="button" id="btnForward">Forward</button>
    <button type="button" id="btnBackward">Backward</button>
    <button type="button" id="btnHistoryLength">History Length</button>
</div>



</div>
</body>
</html>